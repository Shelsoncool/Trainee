<!DOCTYPE html>
<html lang="en">
<head>
  <!-- <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="script.js"></script>
<!--   <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
 -->  <link rel="stylesheet" type="text/css" media="screen" href="jquery-ui.css" />
    <script src="jquery.js"></script>
    <script src="jquery-ui.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
    <script type = "text/javascript">
        $(document).ready(function () {
            var age = "";
            $('#dob').datepicker({
                onSelect: function (value, ui) {
                    var today = new Date();
                    age = today.getFullYear() - ui.selectedYear;
                    $('#age').val(age);
                },
                maxDate: '+0d',
                changeMonth: true,
                changeYear: true

            })
        })
        $(document).ready(function()
         {
          $('.select2').select2();
        });
    </script>
   
</head>


<body bgcolor="grey">

        <form action="#" name="Student">
    

                      <table cellpadding="10" width="70%" height="60" bgcolor="#d2a679" align="center" border="1" 
                        cellspacing="3">


                      <tr>
                      <td align="center"><img src="download.jpg" width="150" height="135" /></td>
                        <td colspan=2>
                        <center><font size=6 color="#2a3517"><b>Student Registration Form</b></font></center>
                        </td>

                        </tr>
                      <tr align="center">
                        <td>Student Name</td>
                        <td><input type=text name="name" id="name" size="30" required="" >
                        <span class="error_form" id="name_error_message"></span>
                        </td>
                        </tr>

                        <tr align="center">
                        <td>EmailId</td>
                        <td><input type="text" name="email" id="email" size="30" required="">
                        <span class="error_form" id="email_error_message"></span>
                        </td>
                        </tr>

                        <tr align="center">
                        <td>Date of birth</td>
                        <td><input type="text" name="dob" id="dob" size="30" required="">
                        <span class="error_form" id="dob_error_message"></span>
                        </td>
                        </tr>

                        <tr align="center">
                        <td>Age</td>
                        <td><input type="text" name="age" id="age" size="30"  >
                        </td>  
                        </tr>

                      <tr align="center">
                        <td>MobileNo</td>
                        <td><input type="number" name="mobile" id="mobile" size="60" align="center" required=" "placeholder="Enter code also" >
                        <span class="error_form" id="mobile_error_message"></span>
                        </td>

                        <tr align="center">
                        <td>Country</td>
                        <td><select class="select2" id="s2" name="state">

                        <span class="error_form" id="mobile_error_message"></span>
                        </td>


                        </tr>
                        <tr align="center">
                        <td align="center"><input type="reset"></td>
                        <td  align="center"><input type="submit" name="submit"  value="submit"></td>

                        </tr>

                        <tr>
                          <ul id = 'country'> </ul>
                        </tr>

                        </table>


        </form>
<script type="text/javascript">
  $(function() {
         $("#name_error_message").hide();
         $("#email_error_message").hide();
         $("#dob_error_message").hide();
         $("#mobile_error_message").hide();
         var error_name = false;
         var error_email = false;
         var error_dob = false;
         var error_mobile = false;

         let dropdown = $('#s2');

          dropdown.empty();

         dropdown.append('<option selected="true" disabled>Choose Country</option>');
         dropdown.prop('selectedIndex', 0);
         //country
         var country=document.getElementById('s2')
         $.ajax({
                        type: 'GET',
                        url: 'http://battuta.medunes.net/api/country/all/?key=addecab533626d17217d0867111058f9',
                        success : function(data_api)
                        {                            
                                $.each(data_api ,function(i ,data)
                                {
                                    //$('#s2').html('<li><br>'+data.name+'</br></li>');
                                    console.log(data.name);
                                     dropdown.append($('<option></option>').attr('value', data.code).text(data.name));

                                });                           
                        }
                
                    });






         $("#name").focusout(function(){
            check_name();
         });
         
         $("#email").focusout(function() {
            check_email();
         });
         // $("#dob").focusout(function() {
         //    create_age();
         // });
          $("#mobile").focusout(function() {
            check_mobile();
         });
         function check_name() 
         {
            var pattern = /^[a-zA-Z]*$/;
            var name = $("#name").val();
            if (pattern.test(name) && fname !== '')
             {
               $("#name_error_message").hide();
               $("#name").css("border-bottom","2px solid #34F458");
               error_name = false;
            } 
            else 
            {
               $("#name_error_message").html("Should contain only Characters");
               $("#name_error_message").show();
               $("#name").css("border-bottom","2px solid #F90A0A");
               error_name = true;
            }
         }
         function check_email()
          {
            var pattern = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            var email = $("#email").val();
            if (pattern.test(email) && email !== '') {
               $("#email_error_message").hide();
               $("#email").css("border-bottom","2px solid #34F458");
            } else {
               $("#email_error_message").html("Invalid Email");
               $("#email_error_message").show();
               $("#email").css("border-bottom","2px solid #F90A0A");
               error_email = true;
            }
         }
         function create_age()
        {
            var age = "";
        $('#dob').datepicker({
            onSelect: function(value, ui) {
                var today = new Date();
                age = today.getFullYear() - ui.selectedYear;
                $('#age').val(age);
            },
            changeMonth: true,
            changeYear: true
        })
         }
         function check_mobile()
          {
            var pattern = /^91([6-9])\d{9}$/;
            var mobile1 = $("#mobile").val();
            if (pattern.test(mobile1) && mobile1 !== '') {
               $("#mobile_error_message").hide();
               $("#mobile").css("border-bottom","2px solid #34F458");
            } else {
               $("#mobile_error_message").html("Invalid Phone number");
               $("#mobile_error_message").show();
               $("#mobile").css("border-bottom","2px solid #F90A0A");
               error_mobile = true;
            }
         }
  });
</script>
  </body>

  </html>

